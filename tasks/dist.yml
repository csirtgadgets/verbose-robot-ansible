---

# cif
- name: pull release from github
  get_url:
    url: "{{ cif.release_url }}/{{ CIF_VERSION | default(cif.version) }}.tar.gz"
    dest: /tmp/verbose-robot.tar.gz
  when: GH_TOKEN is undefined or GH_TOKEN == ""

# github likes to throttle when
- name: pull release from github
  get_url:
    url: "{{ cif.release_url }}/{{ CIF_VERSION | default(cif.version) }}.tar.gz"
    dest: /tmp/verbose-robot.tar.gz
    headers: "Authorization: Token {{ GH_TOKEN }}"
  when: GH_TOKEN is defined and GH_TOKEN != ""

- name: unarchive
  unarchive: src=/tmp/verbose-robot.tar.gz dest=/tmp/ remote_src=true

- name: set dist path
  set_fact: DIST_BUILD_PATH="{{ cif_version | regex_replace('\/', '-') }}"